<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RÃ©munÃ©ration & Temps de travail â€” Fiche interactive</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121a33;
      --text: #eaf0ff;
      --muted: #a9b5d1;
      --accent: #7aa2ff;
      --accent-2: #3dd6a5;
      --danger: #ff6b6b;
      --ring: #2a3b7a;
    }
    [data-theme="light"] {
      --bg: #f7f9ff;
      --panel: #ffffff;
      --text: #141a2d;
      --muted: #51607d;
      --accent: #2d5bff;
      --accent-2: #0bb885;
      --danger: #d43b3b;
      --ring: #dfe6ff;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
        Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      display: grid;
      grid-template-rows: 64px 1fr;
    }
    /* Topbar */
    .topbar {
      display: flex; align-items: center; gap: 12px; padding: 12px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent);
      border-bottom: 1px solid var(--ring);
      backdrop-filter: blur(8px);
      position: sticky; top: 0; z-index: 50;
    }
    .brand { font-weight: 700; letter-spacing: .3px; }
    .top-actions { margin-left: auto; display: flex; gap: 8px; }
    .btn {
      border: 1px solid var(--ring); background: var(--panel); color: var(--text);
      padding: 10px 14px; border-radius: 14px; cursor: pointer; font-weight: 600;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,.15);
    }
    .btn:hover { transform: translateY(-1px); border-color: var(--accent); }
    .btn:active { transform: translateY(0); }
    .btn-accent { background: linear-gradient(135deg, var(--accent), var(--accent-2)); border: none; color: white; }

    /* Layout */
    .layout { display: grid; grid-template-columns: 280px 1fr; min-height: calc(100vh - 64px); }
    .sidebar {
      border-right: 1px solid var(--ring);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent);
      padding: 16px; position: sticky; top: 64px; height: calc(100vh - 64px);
      overflow: auto;
    }
    .search { display: flex; align-items: center; gap: 8px; }
    .search input {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--ring);
      background: var(--panel); color: var(--text);
    }
    .toc { margin-top: 16px; display: grid; gap: 6px; }
    .toc a {
      display: block; text-decoration: none; color: var(--muted); padding: 8px 10px; border-radius: 10px;
    }
    .toc a:hover, .toc a.active { color: var(--text); background: rgba(122,162,255,.12); }

    .content { padding: 28px; display: grid; gap: 18px; }

    /* Card / section */
    .card {
      background: linear-gradient(180deg, var(--panel), transparent 180%);
      border: 1px solid var(--ring);
      border-radius: 18px; padding: 20px 18px; box-shadow: 0 10px 24px rgba(0,0,0,.15);
    }
    .h1 { font-size: clamp(22px, 4vw, 32px); margin: 4px 0 8px; }
    .h2 { font-size: clamp(18px, 3vw, 24px); margin: 0 0 6px; }
    .muted { color: var(--muted); }

    details { border: 1px dashed var(--ring); border-radius: 14px; padding: 12px 14px; }
    summary { cursor: pointer; font-weight: 700; }
    .kpi {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin: 8px 0 6px;
    }
    .kpi .k { background: var(--panel); border: 1px solid var(--ring); border-radius: 14px; padding: 12px; }
    .badge { font-size: 12px; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--ring); }

    .footer { opacity: .7; font-size: 12px; padding-top: 10px; }

    /* Print */
    @media print {
      .sidebar, .topbar, .top-actions { display: none !important; }
      body { background: white; color: black; }
      .card { box-shadow: none; border-color: #ccc; }
    }
    /* Badges & helpers */
    .chip {display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--ring);font-size:12px;margin-right:6px}
    .ok{background:rgba(61,214,165,.14);border-color:var(--accent-2)}
    .warn{background:rgba(255,107,107,.14);border-color:var(--danger)}
    .info{background:rgba(122,162,255,.14);border-color:var(--accent)}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .field{display:grid;gap:6px}
    .field input,.field select{padding:10px 12px;border-radius:12px;border:1px solid var(--ring);background:var(--panel);color:var(--text)}
    .result{font-weight:800;font-size:22px;margin-top:6px}
    .hl{padding:6px 10px;border-radius:10px}
    .hl-blue{background:rgba(122,162,255,.14);border:1px solid var(--accent)}
    .hl-green{background:rgba(61,214,165,.14);border:1px solid var(--accent-2)}
    .hl-red{background:rgba(255,107,107,.14);border:1px solid var(--danger)}
    li > div { margin-top: 6px; }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">ğŸ’¼ RÃ©munÃ©ration & Temps de travail â€” Fiche interactive</div>
    <div class="top-actions">
      <button class="btn" id="themeToggle" aria-pressed="false" title="Basculer clair/sombre">ğŸŒ— ThÃ¨me</button>
      <button class="btn" onclick="window.print()" title="Imprimer ou exporter en PDF">ğŸ–¨ï¸ Imprimer</button>
      <button class="btn btn-accent" id="exportJson" title="Exporter le contenu au format JSON">â¤´ï¸ Export JSON</button>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <label class="search" for="q">
        ğŸ” <input id="q" type="search" placeholder="Rechercher une notion (ex: congÃ©s, SMIC, HS)â€¦" />
      </label>
      <nav class="toc" id="toc">
        <a href="#intro" class="active">Introduction</a>
        <a href="#salaire-base">Salaire de base & SMIC</a>
        <a href="#conges-payes">CongÃ©s payÃ©s</a>
        <a href="#jours-feries">Jours fÃ©riÃ©s</a>
        <a href="#exos-feries">Exercices fÃ©riÃ©s</a>
        <a href="#camisc">Semaine test CP â€¢ FÃ©riÃ© â€¢ RTT</a>
        <a href="#heures-sup">Heures supplÃ©mentaires</a>
        <a href="#exos-hs">Exercices HS</a>
        <a href="#heures-compl">Heures complÃ©mentaires</a>
        <a href="#exos-hc">Exercices HC</a>
        <a href="#quiz">Quiz rapide</a>
        <a href="#quiz-rtx">Quiz cas mixte</a>
        <a href="#cal-fr">Calendrier ğŸ‡«ğŸ‡· (optionnel)</a>
        <a href="#avantages-nature">Avantages en nature</a>
        <a href="#temps-effectif">Temps de travail effectif</a>
        <a href="#refs">RÃ©fÃ©rences officielles</a>
      </nav>
    </aside>

    <main class="content" id="content">
      <section id="intro" class="card" data-tags="intro structure mÃ©thode">
        <h1 class="h1">Bienvenue ğŸ‘‹</h1>
        <p class="muted">Ce document HTML/CSS/JS est un <strong>template interactif</strong> pour synthÃ©tiser un cours sur la rÃ©munÃ©ration brute et le temps de travail. Il fonctionne hors-ligne, sâ€™imprime proprement et propose recherche, sommaire et export.</p>
        <div class="kpi">
          <div class="k"><div class="muted">DurÃ©e lÃ©gale (hebdo)</div><div class="h2">35 h</div></div>
          <div class="k"><div class="muted">Mensualisation (35 h)</div><div class="h2">151,67 h</div></div>
          <div class="k"><div class="muted">Semaines de CP</div><div class="h2">5 sem.</div></div>
        </div>
        <details>
          <summary>Comment utiliser</summary>
          <ul>
            <li>ğŸ—‚ï¸ Naviguez via le sommaire Ã  gauche ;</li>
            <li>ğŸ” Tapez un mot-clÃ© pour filtrer les sections ;</li>
            <li>ğŸ–¨ï¸ Imprimez (ou exportez en PDF) avec le bouton en haut ;</li>
            <li>ğŸŒ— Changez de thÃ¨me clair/sombre ;</li>
            <li>â¤´ï¸ Exportez le contenu au format JSON pour rÃ©utilisation.</li>
          </ul>
        </details>
      </section>

      <section id="salaire-base" class="card" data-tags="smic salaire base mensualisation minimum grilles">
        <h2 class="h1">Salaire de base & SMIC</h2>
        <p>
          Le salaire de base se calcule souvent via lâ€™horaire mensuel moyen :<br/>
          <code>Horaire mensuel = durÃ©e hebdo Ã— 52 / 12</code> (pour 35 h â†’ 151,67 h). Le respect du salaire minimum se vÃ©rifie au regard du <em>SMIC</em> ou du minimum conventionnel.
        </p>
        <details>
          <summary>Ã€ retenir</summary>
          <ul>
            <li>Le salaire peut Ãªtre fixe, Ã  la tÃ¢che, ou avec part variable (commissions, etc.).</li>
            <li>Certains Ã©lÃ©ments comptent pour vÃ©rifier le minimum (ex : avantages en nature selon rÃ¨gles), dâ€™autres non.</li>
          </ul>
        </details>
      </section>

      <section id="conges-payes" class="card" data-tags="congÃ©s payÃ©s acquisition pÃ©riode rÃ©fÃ©rence maintien dixiÃ¨me indemnitÃ© dÃ©clenchement heures supplÃ©mentaires 2025">
        <h2 class="h1">CongÃ©s payÃ©s (acquisition, indemnitÃ© & impact HS) <span class="chip info">âš–ï¸ MAJ 2025</span></h2>
        <p>
          Droits acquis sur une pÃ©riode de rÃ©fÃ©rence (souvent 1er juin N-1 â†’ 31 mai N). Tout salariÃ© bÃ©nÃ©ficie de <strong>5 semaines</strong> (30 ouvrables ou 25 ouvrÃ©s) par an. Certaines pÃ©riodes dâ€™absence sont assimilÃ©es Ã  du travail effectif pour lâ€™acquisition.
        </p>
        <p class="hl hl-blue">ğŸ†• Depuis 2025, <strong>les jours de CP posÃ©s dans la semaine sont pris en compte</strong> pour apprÃ©cier le seuil de dÃ©clenchement des heures supplÃ©mentaires lorsque le dÃ©compte se fait Ã  la semaine. On additionne <em>heures rÃ©ellement travaillÃ©es</em> + <em>CP au rythme habituel</em> et on compare au seuil de 35 h.</p>
        <details>
          <summary>IndemnitÃ© de CP â€” deux mÃ©thodes</summary>
          <ol>
            <li><strong>10áµ‰</strong> : 10 % de la rÃ©munÃ©ration brute de rÃ©fÃ©rence.</li>
            <li><strong>Maintien</strong> : ce que le salariÃ© aurait perÃ§u sâ€™il avait travaillÃ© (retenue pour absence en miroir).</li>
          </ol>
          <p>On retient <em>la plus favorable</em> pour le salariÃ©.</p>
        </details>
      </section>

      <section id="heures-sup" class="card" data-tags="heures supplÃ©mentaires majorations 25% 50% contingent repos congÃ©s payÃ©s jurisprudence 2025">
        <h2 class="h1">Heures supplÃ©mentaires <span class="chip info">âš–ï¸ MAJ 2025</span></h2>
        <p>
          Heures au-delÃ  de la durÃ©e lÃ©gale (35 h/semaine), en principe Ã  la demande de lâ€™employeur. Majorations usuelles : <strong>25 %</strong> de la 36áµ‰ Ã  la 43áµ‰ heure, puis <strong>50 %</strong> (sauf dispositions conventionnelles plus favorables).
        </p>
        <p class="hl hl-blue">ğŸ†• Depuis un arrÃªt de la Cour de cassation (10 septembre 2025), <strong>les jours de congÃ©s payÃ©s posÃ©s dans la semaine sont assimilÃ©s Ã  du temps de travail</strong> pour apprÃ©cier le seuil de dÃ©clenchement des heures supplÃ©mentaires. ConcrÃ¨tement : on compare la somme <em>heures rÃ©ellement travaillÃ©es + heures de congÃ© (au rythme habituel)</em> au seuil des 35 h.</p>
        <details>
          <summary>Conversions utiles</summary>
          <p><code>centiÃ¨mes dâ€™heure = minutes / 60</code> Â· ex : 15 min â†’ 0,25 h Â· 30 min â†’ 0,50 h</p>
        </details>
      </section>

      <section id="heures-compl" class="card" data-tags="temps partiel heures complÃ©mentaires 1/10 1/3 majorations limite semaine">
        <h2 class="h1">Heures complÃ©mentaires (temps partiel) <span class="chip info">ğŸ§© Rappel</span></h2>
        <p>
          Heures au-delÃ  de la durÃ©e contractuelle du temps partiel, sans atteindre la durÃ©e lÃ©gale. Plafond par dÃ©faut : <strong>+10 %</strong> de lâ€™horaire contractuel (pouvant aller jusquâ€™Ã  <strong>1/3</strong> via accord). Majorations : <strong>+10 %</strong> dans la limite du 1/10áµ‰, puis <strong>+25 %</strong> au-delÃ  (et dans la limite de 1/3).</p>
        <p class="hl hl-green">ğŸ’¡ Astuce : pensez <em>contrat dâ€™abord</em> (HC), <em>loi ensuite</em> (HS). Les HC ne transforment pas le contrat en temps plein et ne donnent pas droit au repos comp. obligatoire.</p>
      </section>

      <section id="avantages-nature" class="card" data-tags="avantages en nature logement vÃ©hicule repas tic Ã©valuation cotisations">
        <h2 class="h1">Avantages en nature</h2>
        <p>
          Biens ou services fournis pour un usage personnel (logement, vÃ©hicule, repas, TICâ€¦). Constituent un <em>Ã©lÃ©ment de rÃ©munÃ©ration</em> : intÃ©grÃ©s au brut, soumis Ã  cotisations et imposables. Ã‰valuation forfaitaire ou au rÃ©el selon lâ€™avantage et le cadre.
        </p>
      </section>

      <section id="temps-effectif" class="card" data-tags="temps de travail effectif repos pauses astreinte dÃ©placements jours fÃ©riÃ©s rtt">
        <h2 class="h1">Temps de travail effectif</h2>
        <p>
          PÃ©riode oÃ¹ le salariÃ© est Ã  la disposition de lâ€™employeur et se conforme Ã  ses directives sans pouvoir vaquer librement. Sert au calcul des HS et au respect des plafonds (10 h/j, 48 h/sem., 44 h en moyenne sur 12 sem.). Attention : la notion pour lâ€™acquisition des CP peut inclure certaines absences.
        </p>
        <details>
          <summary>Repos & cas particuliers</summary>
          <ul>
            <li>Repos quotidien : 11 h Â· Repos hebdo : 24 h + 11 h = 35 h.</li>
            <li>Pauses, habillage, astreinte, dÃ©placements : traitement variable selon conditions.</li>
          </ul>
        </details>
      </section>

      <section id="jours-feries" class="card" data-tags="jours fÃ©riÃ©s 1er mai chÃ´mÃ© payÃ© liste mensualisation exceptions service-public">
        <h2 class="h1">Jours fÃ©riÃ©s ğŸ† (comptage & paie)</h2>
        <p><span class="chip info">RÃ¨gle simple</span> Un jour fÃ©riÃ© <strong>chÃ´mÃ© et payÃ©</strong> nâ€™est pas du temps de <em>travail effectif</em> : il <strong>ne compte pas</strong> pour atteindre le seuil des 35 h de dÃ©clenchement des HS. En revanche, un <strong>fÃ©riÃ© travaillÃ©</strong> compte (heures rÃ©ellement effectuÃ©es).</p>
        <ul>
          <li>ğŸŒ <strong>Liste lÃ©gale (11)</strong> : 1er janvier, lundi de PÃ¢ques, 1er mai, 8 mai, Ascension, lundi de PentecÃ´te, 14 juillet, Assomption, Toussaint, 11 nov., NoÃ«l.</li>
          <li>ğŸŒŸ <strong>1er mai</strong> : sâ€™il est travaillÃ© â†’ rÃ©munÃ©ration <strong>doublÃ©e</strong> ; sâ€™il est chÃ´mÃ© â†’ <strong>payÃ© sans perte</strong>.</li>
          <li>ğŸ’¶ <strong>Mensualisation</strong> : en pratique, un fÃ©riÃ© chÃ´mÃ© est <em>payÃ©</em> (pas de perte de salaire). <span class="chip ok">âœ… Cas usuel</span></li>
          <li>ğŸ§© <strong>Rares exceptions (non payÃ©)</strong> : salariÃ© <em>sans</em> 3 mois dâ€™anciennetÃ©, travail Ã  domicile, intermittentâ€¦ (sauf dispositions plus favorables). <span class="chip warn">âš ï¸ Cas dâ€™Ã©cole</span></li>
        </ul>
        <p class="hl hl-green">Astuce mÃ©mo : Â« CP â†’ + heures ; FÃ©riÃ© chÃ´mÃ© â†’ 0 h ; FÃ©riÃ© travaillÃ© â†’ + heures ; 1er mai travaillÃ© â†’ double Â». ğŸ˜‰</p>
      </section>

      <section id="exos-feries" class="card" data-tags="exercices jours fÃ©riÃ©s chÃ´mÃ© payÃ© non payÃ© 1er mai rÃ©munÃ©ration">
        <h2 class="h1">ğŸ§ª Exercices â€” Jours fÃ©riÃ©s</h2>
        <p class="muted">EntraÃ®nez-vous aux impacts paie/temps de travail selon que le fÃ©riÃ© est chÃ´mÃ© payÃ©, chÃ´mÃ© non payÃ© (rare) ou travaillÃ©.</p>
        <div class="grid two">
          <div class="field"><label>MensualisÃ© ?</label>
            <select id="ferie_mensu"><option value="oui">Oui (cas usuel)</option><option value="non">Non</option></select>
          </div>
          <div class="field"><label>Type de fÃ©riÃ©</label>
            <select id="ferie_type">
              <option value="chome_paye">ChÃ´mÃ© payÃ©</option>
              <option value="chome_nonpaye">ChÃ´mÃ© non payÃ© (rare)</option>
              <option value="travaille">TravaillÃ©</option>
              <option value="premier_mai_travaille">1er mai travaillÃ©</option>
            </select>
          </div>
          <div class="field"><label>Heures planifiÃ©es ce jour (si travaillÃ©)</label><input id="ferie_heures" type="number" min="0" step="0.01" placeholder="ex : 7"/></div>
          <div class="field"><label>Taux horaire (â‚¬)</label><input id="ferie_th" type="number" min="0" step="0.01" placeholder="ex : 12.50"/></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcFerie">ğŸš€ Calculer</button>
          <span class="muted">RÃ¨gles : chÃ´mÃ© payÃ© â†’ pas de perte (mensualisÃ©) ; chÃ´mÃ© non payÃ© â†’ perte potentielle (cas rares) ; travaillÃ© â†’ salaire normal ; 1er mai travaillÃ© â†’ salaire doublÃ©.</span>
        </div>
        <div id="ferie_out" class="result" aria-live="polite"></div>
        <div id="ferie_break" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemples guidÃ©s</summary>
          <ul>
            <li>MensualisÃ©, fÃ©riÃ© chÃ´mÃ© : 0 h au compteur HS, pas de perte de salaire.</li>
            <li>FÃ©riÃ© travaillÃ© 7 h (hors 1er mai), TH = 12 â‚¬ â†’ +84 â‚¬ bruts, heures prises en compte pour le seuil HS.</li>
            <li>1er mai travaillÃ© 7 h, TH = 12 â‚¬ â†’ +168 â‚¬ bruts (double rÃ©munÃ©ration).</li>
          </ul>
        </details>
      </section>

      <section id="camisc" class="card" data-tags="simulateur semaine gÃ©nÃ©rique cp rtt jours fÃ©riÃ©s sans dates test apprentissage">
        <h2 class="h1">ğŸ§ª Semaine test â€” CP / FÃ©riÃ© / RTT (sans dates)</h2>
        <p class="muted">Renseignez <em>uniquement</em> la configuration de votre semaine : nombre de jours de CP, RTT, fÃ©riÃ©s chÃ´mÃ©s, puis indiquez les <strong>heures rÃ©ellement travaillÃ©es</strong> les jours oÃ¹ vous travaillez (ex. 10 h + 10 h). Aucun besoin de dates.</p>
        <div class="grid two">
          <div class="field"><label>Heures <strong>planifiÃ©es</strong> par jour (rÃ©fÃ©rence)</label><input id="camisc_hpd" type="number" min="0" step="0.25" value="7"/></div>
          <div class="field"><label>Jours de <strong>congÃ©s payÃ©s</strong> (dans la semaine)</label><input id="camisc_cp" type="number" min="0" max="6" step="1" value="0"/></div>
          <div class="field"><label>Jours de <strong>RTT</strong> (repos)</label><input id="camisc_rtt" type="number" min="0" max="6" step="1" value="0"/></div>
          <div class="field"><label>Jours <strong>fÃ©riÃ©s chÃ´mÃ©s</strong></label><input id="camisc_ferie_chome" type="number" min="0" max="3" step="1" value="0"/></div>
          <div class="field"><label>Seuil hebdo</label><input id="camisc_seuil" type="number" min="0" step="0.25" value="35"/></div>
        </div>

        <div style="margin-top:12px">
          <div class="h2">Heures rÃ©ellement travaillÃ©es</div>
          <p class="muted">Ajoutez un champ par jour travaillÃ© et saisissez l'heure rÃ©ellement effectuÃ©e (ex. 10). Les jours chÃ´mÃ©s (CP/RTT/fÃ©riÃ© chÃ´mÃ©) n'ont pas Ã  Ãªtre saisis ici.</p>
          <div id="camisc_worked" class="grid two" style="margin-top:6px"></div>
          <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap">
            <button class="btn" id="camisc_add">â• Ajouter un jour travaillÃ©</button>
            <button class="btn" id="camisc_reset">â™»ï¸ RÃ©initialiser</button>
            <button class="btn btn-accent" id="camisc_calc">ğŸš€ Calculer</button>
          </div>
        </div>

        <div id="camisc_out" class="result" aria-live="polite"></div>
        <div id="camisc_break" class="muted"></div>

        <details style="margin-top:10px"><summary>Explications (loi & mÃ©thode)</summary>
          <ol>
            <li><strong>CP posÃ©s</strong> dans la semaine â†’ assimilÃ©s pour apprÃ©cier le seuil HS (heures/jour = planning de rÃ©fÃ©rence).</li>
            <li><strong>FÃ©riÃ© chÃ´mÃ©</strong> â†’ 0 h (pas du temps effectif) ; si le fÃ©riÃ© est <em>travaillÃ©</em>, saisissez ses heures dans les jours travaillÃ©s.</li>
            <li><strong>RTT</strong> â†’ 0 h (jour de repos). </li>
            <li><strong>Calcul</strong> : total pris en compte = somme(heures <em>rÃ©ellement travaillÃ©es</em>) + CPÃ—h/j ; HS = max(0, total âˆ’ seuil) ; ventilation 25 % puis 50 %.</li>
          </ol>
        </details>
      </section>

      <section id="exos-hs" class="card" data-tags="exercices heures supplÃ©mentaires calcul simulateur congÃ©s payÃ©s jours fÃ©riÃ©s">
        <h2 class="h1">ğŸ§ª Exercices & simulateur â€” Heures supplÃ©mentaires</h2>
        <div class="grid two">
          <div class="field"><label>Heures <strong>travaillÃ©es</strong> dans la semaine (hors fÃ©riÃ©s)</label><input id="hs_trav" type="number" min="0" step="0.01" placeholder="ex : 28"/></div>
          <div class="field"><label>Jours de <strong>congÃ©s payÃ©s</strong> posÃ©s</label><input id="hs_cp_j" type="number" min="0" max="6" step="1" placeholder="ex : 2"/></div>
          <div class="field"><label>Heures <strong>par jour</strong> habituel (planning)</label><input id="hs_hpd" type="number" min="0" step="0.01" placeholder="ex : 7"/></div>
          <div class="field"><label>Heures <strong>travaillÃ©es un jour fÃ©riÃ©</strong> (si oui)</label><input id="hs_h_ferie" type="number" min="0" step="0.01" placeholder="ex : 5"/></div>
          <div class="field"><label>Seuil hebdo</label><input id="hs_seuil" type="number" min="0" step="0.01" value="35"/></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcHS">ğŸš€ Calculer</button>
          <span class="muted">HS = max(0, (heures travaillÃ©es + CP Ã— heures/jour + heures fÃ©riÃ© travaillÃ©es) âˆ’ seuil). Les fÃ©riÃ©s <em>chÃ´mÃ©s</em> nâ€™entrent pas dans le calcul.</span>
        </div>
        <div id="hs_out" class="result" aria-live="polite"></div>
        <div id="hs_breakdown" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemple guidÃ©</summary>
          <p>35 h hebdo, 3 jours travaillÃ©s (21 h) + 1 jour CP (7 h) + fÃ©riÃ© <em>chÃ´mÃ©</em> : total pris en compte = 28 h â†’ <strong>0 HS</strong>. Si le fÃ©riÃ© est <em>travaillÃ©</em> 7 h â†’ 35 h â†’ <strong>0 HS</strong>. Avec 2 CP (14 h) + 28 h travaillÃ©es â†’ 42 h â†’ <strong>7 HS</strong> (25 %).</p>
        </details>
      </section>

      <section id="exos-hc" class="card" data-tags="exercices heures complÃ©mentaires simulateur temps partiel">
        <h2 class="h1">ğŸ§ª Exercices & simulateur â€” Heures complÃ©mentaires</h2>
        <div class="grid two">
          <div class="field"><label>Horaire <strong>contractuel</strong> (hebdo)</label><input id="hc_contract" type="number" min="1" step="0.01" placeholder="ex : 24"/></div>
          <div class="field"><label>Heures <strong>rÃ©alisÃ©es</strong> dans la semaine</label><input id="hc_real" type="number" min="0" step="0.01" placeholder="ex : 28"/></div>
          <div class="field"><label>Accord portant la limite Ã  <strong>1/3</strong> ?</label>
            <select id="hc_one_third"><option value="non">Non</option><option value="oui">Oui</option></select>
          </div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcHC">ğŸš€ Calculer</button>
          <span class="muted">Majoration : +10 % jusquâ€™Ã  1/10áµ‰, puis +25 % jusquâ€™Ã  1/3 si accord.</span>
        </div>
        <div id="hc_out" class="result" aria-live="polite"></div>
        <div id="hc_breakdown" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemple guidÃ©</summary>
          <p>Contrat 20 h, accord 1/3, semaine Ã  26 h â†’ 6 HC : 2 h Ã  +10 % (1/10 = 2 h) puis 4 h Ã  +25 %.</p>
        </details>
      </section>

      <section id="cal-fr" class="card" data-tags="calendrier france jours fÃ©riÃ©s annÃ©e semaine iso sans alsace-moselle domtom">
        <h2 class="h1">ğŸ“… Calendrier ğŸ‡«ğŸ‡· (optionnel) â€” repÃ©rer les fÃ©riÃ©s par semaine</h2>
        <p class="muted">Choisissez une annÃ©e et une semaine (ISO). Le module calcule automatiquement les <strong>jours fÃ©riÃ©s mÃ©tropolitains</strong> tombant dans cette semaine (hors spÃ©cificitÃ©s Alsace-Moselle et Outre-mer) et peut prÃ©remplir le simulateur ci-dessus.</p>
        <div class="grid two">
          <div class="field"><label>AnnÃ©e</label><input id="cal_year" type="number" min="2020" max="2035" value="2025"/></div>
          <div class="field"><label>Semaine ISO (1â€“53)</label><input id="cal_week" type="number" min="1" max="53" value="46"/></div>
        </div>
        <div style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; align-items:center">
          <button class="btn" id="cal_check">ğŸ” Compter les fÃ©riÃ©s</button>
          <button class="btn btn-accent" id="cal_apply">â¬‡ï¸ Appliquer au test</button>
          <span id="cal_info" class="muted"></span>
        </div>
        <div id="cal_list" class="muted" style="margin-top:6px"></div>
      </section>

      <section id="quiz" class="card" data-tags="quiz entrainement heures supplÃ©mentaires complÃ©mentaires jours fÃ©riÃ©s congÃ©s payÃ©s">
        <h2 class="h1">ğŸ¯ Quiz â€” 10 questions</h2>
        <ol id="quizList" style="line-height:1.7">
          <li data-correct="non">35 h : 3 jours travaillÃ©s (21 h) + 1 CP (7 h) + 1 jour travaillÃ© (7 h). Y a-t-il des HS ?
            <div><button class="btn" data-q="1" data-a="oui">Oui</button> <button class="btn" data-q="1" data-a="non">Non</button> <span class="chip" id="q1"></span></div>
          </li>
          <li data-correct="mix">Contrat 24 h. RÃ©alisÃ© : 27 h. Sans accord 1/3, quelles majorations ?
            <div><button class="btn" data-q="2" data-a="10">Tout Ã  +10 %</button> <button class="btn" data-q="2" data-a="mix">1/10áµ‰ Ã  +10 %, reste Ã  +25 %</button> <span class="chip" id="q2"></span></div>
          </li>
          <li data-correct="non">Semaine avec 1 fÃ©riÃ© <em>chÃ´mÃ© payÃ©</em> et 28 h travaillÃ©es (35 h hebdo). HS ?
            <div><button class="btn" data-q="3" data-a="oui">Oui</button> <button class="btn" data-q="3" data-a="non">Non</button> <span class="chip" id="q3"></span></div>
          </li>
          <li data-correct="oui">Semaine avec 1 fÃ©riÃ© <em>travaillÃ©</em> 7 h et 28 h travaillÃ©es (35 h hebdo). HS ?
            <div><button class="btn" data-q="4" data-a="oui">Oui</button> <button class="btn" data-q="4" data-a="non">Non</button> <span class="chip" id="q4"></span></div>
          </li>
          <li data-correct="non">Semaine : 21 h travaillÃ©es + 2 CP (2Ã—7 h). HS ?
            <div><button class="btn" data-q="5" data-a="oui">Oui</button> <button class="btn" data-q="5" data-a="non">Non</button> <span class="chip" id="q5"></span></div>
          </li>
          <li data-correct="oui">Semaine : 28 h travaillÃ©es + 2 CP (2Ã—7 h). HS ?
            <div><button class="btn" data-q="6" data-a="oui">Oui</button> <button class="btn" data-q="6" data-a="non">Non</button> <span class="chip" id="q6"></span></div>
          </li>
          <li data-correct="mix">Contrat 20 h, rÃ©alisÃ© 26 h avec accord 1/3 : rÃ©partition des HC ?
            <div><button class="btn" data-q="7" data-a="10">6 h Ã  +10 %</button> <button class="btn" data-q="7" data-a="mix">2 h Ã  +10 % puis 4 h Ã  +25 %</button> <span class="chip" id="q7"></span></div>
          </li>
          <li data-correct="oui">Contrat 20 h, rÃ©alisÃ© 23 h sans accord 1/3 : dÃ©passement autorisÃ© ?
            <div><button class="btn" data-q="8" data-a="oui">Oui</button> <button class="btn" data-q="8" data-a="non">Non</button> <span class="chip" id="q8"></span></div>
          </li>
          <li data-correct="non">Semaine dÃ©comptÃ©e Ã  la semaine : 28 h travaillÃ©es + 1 CP (7 h). HS ?
            <div><button class="btn" data-q="9" data-a="oui">Oui</button> <button class="btn" data-q="9" data-a="non">Non</button> <span class="chip" id="q9"></span></div>
          </li>
          <li data-correct="oui">Semaine dÃ©comptÃ©e Ã  la semaine : 30 h travaillÃ©es + 1 CP (7 h). HS ?
            <div><button class="btn" data-q="10" data-a="oui">Oui</button> <button class="btn" data-q="10" data-a="non">Non</button> <span class="chip" id="q10"></span></div>
          </li>
        </ol>
      </section>

      <section id="quiz-rtx" class="card" data-tags="quiz rtt cp fÃ©riÃ© cas mixte heures supplÃ©mentaires">
        <h2 class="h1">ğŸ¯ Quiz â€” Cas mixte (5 questions)</h2>
        <ol id="quizList2" style="line-height:1.7">
          <li data-correct="non">Un <strong>RTT</strong> posÃ© le mercredi compte-t-il pour le seuil des 35 h ?
            <div><button class="btn" data-q2="1" data-a="oui">Oui</button> <button class="btn" data-q2="1" data-a="non">Non</button> <span class="chip" id="q2_1"></span></div>
          </li>
          <li data-correct="oui">Un <strong>CP</strong> pris le lundi compte-t-il pour apprÃ©cier les HS hebdo ?
            <div><button class="btn" data-q2="2" data-a="oui">Oui</button> <button class="btn" data-q2="2" data-a="non">Non</button> <span class="chip" id="q2_2"></span></div>
          </li>
          <li data-correct="non">Un <strong>fÃ©riÃ© chÃ´mÃ©</strong> le mardi compte-t-il pour le seuil HS ?
            <div><button class="btn" data-q2="3" data-a="oui">Oui</button> <button class="btn" data-q2="3" data-a="non">Non</button> <span class="chip" id="q2_3"></span></div>
          </li>
          <li data-correct="oui">Avec 10 h + 10 h travaillÃ©es (jeu/ven) et un CP le lundi (7 h), le seuil de 35 h est-il dÃ©passÃ© ?
            <div><button class="btn" data-q2="4" data-a="oui">Oui</button> <button class="btn" data-q2="4" data-a="non">Non</button> <span class="chip" id="q2_4"></span></div>
          </li>
          <li data-correct="mix">Si le seuil est dÃ©passÃ©, la ventilation des HS est-elle dâ€™abord Ã  <strong>25 %</strong> puis <strong>50 %</strong> ?
            <div><button class="btn" data-q2="5" data-a="mix">Oui, 25 % puis 50 %</button> <button class="btn" data-q2="5" data-a="non">Non</button> <span class="chip" id="q2_5"></span></div>
          </li>
        </ol>
      </section>

      <section class="card" id="bloc-notes" data-tags="notes brouillon rÃ©vision">
        <h2 class="h1">Bloc-notes ğŸ“</h2>
        <p class="muted">Vos points clÃ©s, formules et piÃ¨ges Ã  Ã©viter.</p>
        <textarea id="notes" rows="8" style="width:100%; border-radius:12px; padding:12px; border:1px solid var(--ring); background:var(--panel); color:var(--text);"></textarea>
        <div style="display:flex; gap:8px; margin-top:8px;">
          <button class="btn" id="saveNotes">ğŸ’¾ Sauvegarder</button>
          <span id="saved" class="muted" aria-live="polite"></span>
        </div>
      </section>

      <footer class="footer">
        <span>Gabarit pÃ©dagogique HTML/CSS/JS â€” vous pouvez adapter librement ce fichier Ã  votre cours.</span>
      </footer>

      <section id="refs" class="card" data-tags="rÃ©fÃ©rences lÃ©gales code du travail legifrance service-public boss gouv jurisprudence cour de cassation">
        <h2 class="h1">ğŸ“š RÃ©fÃ©rences officielles (France)</h2>
        <ul>
          <li><strong>Heures supplÃ©mentaires</strong> : Code du travail, art. <a href="https://www.legifrance.gouv.fr/codes/article_lc/LEGIARTI000033020373" target="_blank" rel="noopener">L3121-28</a> et suivants ; fiche MinistÃ¨re du Travail : <a href="https://travail-emploi.gouv.fr/les-heures-supplementaires-definition-et-limites" target="_blank" rel="noopener">"DÃ©finition & limites"</a>.</li>
          <li><strong>Heures complÃ©mentaires</strong> (temps partiel) : Code du travail, partie L3123 (ex. <a href="https://www.legifrance.gouv.fr/codes/id/LEGISCTA000033020103" target="_blank" rel="noopener">Sous-section 1</a>) ; Service-Public : <a href="https://www.service-public.fr/particuliers/vosdroits/F32428" target="_blank" rel="noopener">Temps partiel</a> ; BOSS : <a href="https://boss.gouv.fr/accueil/exonerations/exonerations-heures-supplementai.html" target="_blank" rel="noopener">ExonÃ©rations HS/HC</a>.</li>
          <li><strong>Jours fÃ©riÃ©s</strong> : Code du travail, chap. <a href="https://www.legifrance.gouv.fr/codes/section_lc/LEGITEXT000006072050/LEGISCTA000006178007/" target="_blank" rel="noopener">L3133-1 Ã  L3133-12</a> ; MinistÃ¨re du Travail : <a href="https://travail-emploi.gouv.fr/les-jours-feries-et-les-ponts" target="_blank" rel="noopener">Jours fÃ©riÃ©s et ponts</a> ; Service-Public : <a href="https://www.service-public.fr/particuliers/vosdroits/F2405" target="_blank" rel="noopener">Fiche salariÃ©s</a>.</li>
          <li><strong>CP & dÃ©clenchement HS (MAJ 10/09/2025)</strong> : CommuniquÃ© Cour de cassation : <a href="https://www.courdecassation.fr/toutes-les-actualites/2025/09/10/communique-conge-paye-et-decompte-des-heures-supplementaires" target="_blank" rel="noopener">"CongÃ© payÃ© et dÃ©compte des heures supplÃ©mentaires"</a>.</li>
        </ul>
        <p class="muted">Sources : LÃ©gifrance, Cour de cassation, MinistÃ¨re du Travail, Service-Public.fr, BOSS (Bulletin officiel de la SÃ©curitÃ© sociale). Aucun blog non officiel.</p>
      </section>
    </main>
  </div>

  <script>
    // === Helper: safe number ===
    const num = (v, d=0) => {
      const n = parseFloat(String(v).replace(',', '.'));
      return isFinite(n) ? n : d;
    };

    // Theme toggle (light/dark)
    const themeBtn = document.getElementById('themeToggle');
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme) document.documentElement.setAttribute('data-theme', storedTheme);
    themeBtn?.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || 'dark';
      const next = current === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeBtn.setAttribute('aria-pressed', String(next === 'light'));
    });

    // TOC active on scroll
    const tocLinks = [...document.querySelectorAll('#toc a')];
    const sections = tocLinks.map(a => document.querySelector(a.getAttribute('href')));
    const onScroll = () => {
      const y = window.scrollY + 90;
      let activeIndex = 0;
      sections.forEach((sec, i) => { if (sec && sec.offsetTop <= y) activeIndex = i; });
      tocLinks.forEach((a, i) => a.classList.toggle('active', i === activeIndex));
    };
    document.addEventListener('scroll', onScroll, { passive: true });
    onScroll();

    // Smooth scroll (optional nice UX)
    tocLinks.forEach(a => a.addEventListener('click', (e) => {
      const href = a.getAttribute('href');
      const target = document.querySelector(href);
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        history.replaceState(null, '', href);
      }
    }));

    // Search filter
    const q = document.getElementById('q');
    q?.addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase().trim();
      document.querySelectorAll('main .card').forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').toLowerCase();
        const text = card.textContent.toLowerCase();
        const hit = !term || tags.includes(term) || text.includes(term);
        card.style.display = hit ? '' : 'none';
      });
    });

    // Notes localStorage
    const notes = document.getElementById('notes');
    const savedLbl = document.getElementById('saved');
    const key = 'fiche-notes';
    if (notes) notes.value = localStorage.getItem(key) || '';
    document.getElementById('saveNotes')?.addEventListener('click', () => {
      localStorage.setItem(key, notes.value);
      savedLbl.textContent = 'NotÃ© âœ”ï¸';
      setTimeout(() => savedLbl.textContent = '', 1200);
    });

    // Simple JSON export (content-only)
    document.getElementById('exportJson')?.addEventListener('click', () => {
      const data = [...document.querySelectorAll('main .card')].map(sec => ({
        id: sec.id,
        title: sec.querySelector('.h1')?.textContent?.trim(),
        text: sec.innerText.trim()
      }));
      const blob = new Blob([JSON.stringify({ exportedAt: new Date().toISOString(), data }, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'fiche-remuneration-temps-travail.json';
      a.click(); URL.revokeObjectURL(url);
    });

    // === Simulateur HS (avec CP assimilÃ©) ===
    const hsTrav = document.getElementById('hs_trav');
    const hsCPJ = document.getElementById('hs_cp_j');
    const hsHPD = document.getElementById('hs_hpd');
    const hsHFerie = document.getElementById('hs_h_ferie');
    const hsSeuil = document.getElementById('hs_seuil');
    const hsOut = document.getElementById('hs_out');
    const hsBreak = document.getElementById('hs_breakdown');
    document.getElementById('calcHS')?.addEventListener('click', () => {
      const t = num(hsTrav?.value, 0);
      const j = num(hsCPJ?.value, 0);
      const hpd = num(hsHPD?.value, 0);
      const seuil = num(hsSeuil?.value, 35);
      const ferieTravaillees = num(hsHFerie?.value, 0);
      const assimil = t + j*hpd + ferieTravaillees; // fÃ©riÃ©s chÃ´mÃ©s = 0 h, travaillÃ©s = +heures
      const hs = Math.max(0, assimil - seuil);
      const hs25 = Math.min(hs, 8);
      const hs50 = Math.max(0, hs - 8);
      hsOut.textContent = `ğŸ” Total pris en compte = ${assimil.toFixed(2)} h â†’ HS = ${hs.toFixed(2)} h (25%: ${hs25.toFixed(2)} h, 50%: ${hs50.toFixed(2)} h)`;
      hsBreak.innerHTML = assimil>=seuil ? `<span class='chip ok'>âœ… Seuil dÃ©passÃ©</span> Pensez aux contreparties (repos/contingent).` : `<span class='chip warn'>â„¹ï¸ Pas de HS</span> Total < seuil.`;
    });

    // === Simulateur HC (temps partiel) ===
    const hcC = document.getElementById('hc_contract');
    const hcR = document.getElementById('hc_real');
    const hcOneThird = document.getElementById('hc_one_third');
    const hcOut = document.getElementById('hc_out');
    const hcBreak = document.getElementById('hc_breakdown');
    document.getElementById('calcHC')?.addEventListener('click', () => {
      const c = num(hcC?.value, 0);
      const r = num(hcR?.value, 0);
      const max10 = c*0.1;
      const max33 = c/3;
      const accord = hcOneThird?.value==='oui';
      const extra = Math.max(0, r - c);
      if (extra === 0) { hcOut.textContent = '0 h HC'; hcBreak.textContent=''; return; }
      const cap = accord ? max33 : max10;
      if (extra > cap + 1e-9) {
        hcOut.textContent = `â— Dans ce cadre, ${extra.toFixed(2)} h dÃ©passent le plafond autorisÃ© (${cap.toFixed(2)} h).`;
        hcBreak.textContent = 'Ajuster la planification ou appliquer un autre dispositif.';
        return;
      }
      const hc10 = Math.min(extra, max10);
      const hc25 = Math.max(0, extra - max10);
      hcOut.textContent = `HC = ${extra.toFixed(2)} h â†’ +10%: ${hc10.toFixed(2)} h${accord?`, +25%: ${hc25.toFixed(2)} h`: hc25>0?`, âš ï¸ au-delÃ  du 1/10áµ‰ non autorisÃ© sans accord`:''}`;
      hcBreak.innerHTML = `<span class='chip ok'>${hc10.toFixed(2)} h Ã  +10%</span>` + (hc25>0? ` <span class='chip ok'>${hc25.toFixed(2)} h Ã  +25%</span>`: '');
    });

    // === Exercices fÃ©riÃ©s (chÃ´mÃ© payÃ© / non payÃ© / travaillÃ©) ===
    const ferieMensu = document.getElementById('ferie_mensu');
    const ferieType = document.getElementById('ferie_type');
    const ferieHeures = document.getElementById('ferie_heures');
    const ferieTH = document.getElementById('ferie_th');
    const ferieOut = document.getElementById('ferie_out');
    const ferieBreak = document.getElementById('ferie_break');
    document.getElementById('calcFerie')?.addEventListener('click', () => {
      const mensu = ferieMensu?.value==='oui';
      const type = ferieType?.value;
      const h = num(ferieHeures?.value, 0);
      const th = num(ferieTH?.value, 0);
      let deltaSalaire = 0; let commentaire = '';
      if (type==='chome_paye') {
        deltaSalaire = 0; commentaire = mensu? 'MensualisÃ© : pas de perte, journÃ©e chÃ´mÃ©e payÃ©e.' : 'Non mensualisÃ© : vÃ©rifier dispositions applicables.';
      } else if (type==='chome_nonpaye') {
        deltaSalaire = mensu? 0 : -h*th; commentaire = mensu? 'MensualisÃ© : en pratique payÃ©.' : 'Cas rare : perte possible si conditions lÃ©gales non remplies.';
      } else if (type==='travaille') {
        deltaSalaire = h*th; commentaire = 'FÃ©riÃ© travaillÃ© (hors 1er mai) : rÃ©munÃ©ration normale.';
      } else if (type==='premier_mai_travaille') {
        deltaSalaire = 2*h*th; commentaire = '1er mai travaillÃ© : rÃ©munÃ©ration doublÃ©e.';
      }
      ferieOut.textContent = `${deltaSalaire>=0? 'ğŸ’¶ Gain/RÃ©munÃ©ration': 'ğŸ’¸ Perte'} estimÃ©(e) : ${deltaSalaire.toFixed(2)} â‚¬`;
      ferieBreak.textContent = commentaire;
    });

    // === Semaine test â€” gestion dynamique des jours travaillÃ©s ===
    const workedWrap = document.getElementById('camisc_worked');
    const btnAdd = document.getElementById('camisc_add');
    const btnReset = document.getElementById('camisc_reset');
    const btnCalc = document.getElementById('camisc_calc');
    const camiscOut = document.getElementById('camisc_out');
    const camiscBreak = document.getElementById('camisc_break');
    const addWorkedField = (val='') => {
      const id = `camisc_work_${Math.random().toString(36).slice(2,8)}`;
      const div = document.createElement('div'); div.className='field';
      div.innerHTML = `<label>Heures rÃ©ellement travaillÃ©es (jour)</label>
        <input type="number" class="camisc_day" id="${id}" min="0" step="0.25" value="${val}">`;
      workedWrap.appendChild(div);
    };
    btnAdd?.addEventListener('click', () => addWorkedField());
    btnReset?.addEventListener('click', () => { workedWrap.innerHTML=''; camiscOut.textContent=''; camiscBreak.textContent=''; });
    btnCalc?.addEventListener('click', () => {
      const hpd = num(document.getElementById('camisc_hpd')?.value, 0);
      const cp = num(document.getElementById('camisc_cp')?.value, 0);
      const rtt = num(document.getElementById('camisc_rtt')?.value, 0); // info
      const ferieChome = num(document.getElementById('camisc_ferie_chome')?.value, 0); // info
      const seuil = num(document.getElementById('camisc_seuil')?.value, 35);
      const worked = [...document.querySelectorAll('.camisc_day')].reduce((s, el) => s + num(el.value, 0), 0);
      const totalPrisEnCompte = worked + cp * hpd; // RTT et fÃ©riÃ©s chÃ´mÃ©s comptent 0
      const hs = Math.max(0, totalPrisEnCompte - seuil);
      const hs25 = Math.min(hs, 8); const hs50 = Math.max(0, hs - 8);
      camiscOut.textContent = `ğŸ” Total pris en compte = ${totalPrisEnCompte.toFixed(2)} h â†’ HS = ${hs.toFixed(2)} h (25%: ${hs25.toFixed(2)} h, 50%: ${hs50.toFixed(2)} h)`;
      camiscBreak.innerHTML = `<span class="chip info">Worked: ${worked.toFixed(2)} h</span> <span class="chip info">CP: ${cp} Ã— ${hpd} h</span> <span class="chip warn">RTT: ${rtt} j â†’ 0 h</span> <span class="chip warn">FÃ©riÃ©s chÃ´mÃ©s: ${ferieChome} j â†’ 0 h</span>`;
    });
    // Ajout de 2 champs par dÃ©faut pour guider l'utilisateur
    addWorkedField(); addWorkedField();

    // === Calendrier FR par semaine ISO ===
    const calYear = document.getElementById('cal_year');
    const calWeek = document.getElementById('cal_week');
    const calInfo = document.getElementById('cal_info');
    const calList = document.getElementById('cal_list');
    function easterDate(y) { // Algorithme de Butcher (grÃ©gorien)
      const a = y % 19;
      const b = Math.floor(y / 100);
      const c = y % 100;
      const d = Math.floor(b / 4);
      const e = b % 4;
      const f = Math.floor((b + 8) / 25);
      const g = Math.floor((b - f + 1) / 3);
      const h = (19*a + b - d - g + 15) % 30;
      const i = Math.floor(c / 4);
      const k = c % 4;
      const l = (32 + 2*e + 2*i - h - k) % 7;
      const m = Math.floor((a + 11*h + 22*l) / 451);
      const month = Math.floor((h + l - 7*m + 114) / 31); // 3=March, 4=April
      const day = ((h + l - 7*m + 114) % 31) + 1;
      return new Date(Date.UTC(y, month - 1, day)); // dimanche de PÃ¢ques (UTC)
    }
    function addDays(d, n){ const x = new Date(d); x.setUTCDate(x.getUTCDate()+n); return x; }
    function frHolidays(y){
      const e = easterDate(y);
      const fmt = d => new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));
      const list = [
        { name:'Jour de lâ€™An', date: fmt(new Date(Date.UTC(y,0,1))) },
        { name:'Lundi de PÃ¢ques', date: addDays(e, 1) },
        { name:'FÃªte du Travail', date: fmt(new Date(Date.UTC(y,4,1))) },
        { name:'Victoire 1945', date: fmt(new Date(Date.UTC(y,4,8))) },
        { name:'Ascension', date: addDays(e, 39) },
        { name:'Lundi de PentecÃ´te', date: addDays(e, 50) },
        { name:'FÃªte Nationale', date: fmt(new Date(Date.UTC(y,6,14))) },
        { name:'Assomption', date: fmt(new Date(Date.UTC(y,7,15))) },
        { name:'Toussaint', date: fmt(new Date(Date.UTC(y,10,1))) },
        { name:'Armistice 1918', date: fmt(new Date(Date.UTC(y,10,11))) },
        { name:'NoÃ«l', date: fmt(new Date(Date.UTC(y,11,25))) },
      ];
      return list;
    }
    function isoWeekToRange(year, week){
      // Lundi de la semaine ISO: le jeudi de la 1Ã¨re semaine est le 4 janv (ISO)
      const simple = new Date(Date.UTC(year,0,4));
      const dow = (simple.getUTCDay()+6)%7; // 0=lundi ... 6=dimanche
      const week1Mon = new Date(Date.UTC(year,0,4 - dow));
      const monday = new Date(week1Mon); monday.setUTCDate(week1Mon.getUTCDate() + (week-1)*7);
      const sunday = new Date(monday); sunday.setUTCDate(monday.getUTCDate()+6);
      return { monday, sunday };
    }
    function formatFR(d){
      return d.toLocaleDateString('fr-FR', { weekday:'long', day:'2-digit', month:'long' });
    }
    document.getElementById('cal_check')?.addEventListener('click', () => {
      const y = Math.min(Math.max(num(calYear?.value, new Date().getUTCFullYear()), 1900), 2100);
      const w = Math.min(Math.max(Math.floor(num(calWeek?.value, 1)), 1), 53);
      const { monday, sunday } = isoWeekToRange(y, w);
      const hol = frHolidays(y).filter(h => h.date >= monday && h.date <= sunday);
      calInfo.textContent = `Semaine du ${formatFR(monday)} au ${formatFR(sunday)} â€” ${hol.length} fÃ©riÃ©(s)`;
      calList.innerHTML = hol.length ? `<ul>${hol.map(h=>`<li>${formatFR(h.date)} â€” ${h.name}</li>`).join('')}</ul>` : 'Aucun fÃ©riÃ© mÃ©tropolitain cette semaine.';
      // mÃ©moriser la derniÃ¨re dÃ©tection pour Appliquer
      calList.dataset.count = String(hol.length);
    });
    document.getElementById('cal_apply')?.addEventListener('click', () => {
      const n = num(calList.dataset.count, 0);
      const ferieInput = document.getElementById('camisc_ferie_chome');
      if (ferieInput) { ferieInput.value = n; ferieInput.dispatchEvent(new Event('input')); }
    });

    // === Quiz (2 blocs) â€” dÃ©lÃ©gation d'Ã©vÃ©nements ===
    function handleQuizClick(e){
      const btn = e.target.closest('button.btn');
      if (!btn) return;
      const qid = btn.dataset.q;      // quiz 1..10
      const qid2 = btn.dataset.q2;    // quiz2 1..5
      const answer = btn.dataset.a;
      if (qid){
        const li = btn.closest('li');
        const expected = li?.dataset.correct; // 'oui' | 'non' | 'mix'
        const chip = document.getElementById(`q${qid}`);
        const ok = expected === answer;
        chip.textContent = ok ? 'âœ… Juste' : 'âŒ Faux';
        chip.className = 'chip ' + (ok ? 'ok' : 'warn');
      } else if (qid2){
        const li = btn.closest('li');
        const expected = li?.dataset.correct;
        const chip = document.getElementById(`q2_${qid2}`);
        const ok = expected === answer;
        chip.textContent = ok ? 'âœ… Juste' : 'âŒ Faux';
        chip.className = 'chip ' + (ok ? 'ok' : 'warn');
      }
    }
    document.getElementById('quiz')?.addEventListener('click', handleQuizClick);
    document.getElementById('quiz-rtx')?.addEventListener('click', handleQuizClick);
  </script>
</body>
</html>
