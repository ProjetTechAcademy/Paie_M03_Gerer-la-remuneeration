<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rémunération & Temps de travail — Fiche interactive</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121a33;
      --text: #eaf0ff;
      --muted: #a9b5d1;
      --accent: #7aa2ff;
      --accent-2: #3dd6a5;
      --danger: #ff6b6b;
      --ring: #2a3b7a;
    }
    [data-theme="light"] {
      --bg: #f7f9ff;
      --panel: #ffffff;
      --text: #141a2d;
      --muted: #51607d;
      --accent: #2d5bff;
      --accent-2: #0bb885;
      --danger: #d43b3b;
      --ring: #dfe6ff;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
        Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      display: grid;
      grid-template-rows: 64px 1fr;
    }
    /* Topbar */
    .topbar {
      display: flex; align-items: center; gap: 12px; padding: 12px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent);
      border-bottom: 1px solid var(--ring);
      backdrop-filter: blur(8px);
      position: sticky; top: 0; z-index: 50;
    }
    .brand { font-weight: 700; letter-spacing: .3px; }
    .top-actions { margin-left: auto; display: flex; gap: 8px; }
    .btn {
      border: 1px solid var(--ring); background: var(--panel); color: var(--text);
      padding: 10px 14px; border-radius: 14px; cursor: pointer; font-weight: 600;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,.15);
    }
    .btn:hover { transform: translateY(-1px); border-color: var(--accent); }
    .btn:active { transform: translateY(0); }
    .btn-accent { background: linear-gradient(135deg, var(--accent), var(--accent-2)); border: none; color: white; }

    /* Layout */
    .layout { display: grid; grid-template-columns: 280px 1fr; min-height: calc(100vh - 64px); }
    .sidebar {
      border-right: 1px solid var(--ring);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent);
      padding: 16px; position: sticky; top: 64px; height: calc(100vh - 64px);
      overflow: auto;
    }
    .search { display: flex; align-items: center; gap: 8px; }
    .search input {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--ring);
      background: var(--panel); color: var(--text);
    }
    .toc { margin-top: 16px; display: grid; gap: 6px; }
    .toc a {
      display: block; text-decoration: none; color: var(--muted); padding: 8px 10px; border-radius: 10px;
    }
    .toc a:hover, .toc a.active { color: var(--text); background: rgba(122,162,255,.12); }

    .content { padding: 28px; display: grid; gap: 18px; }

    /* Card / section */
    .card {
      background: linear-gradient(180deg, var(--panel), transparent 180%);
      border: 1px solid var(--ring);
      border-radius: 18px; padding: 20px 18px; box-shadow: 0 10px 24px rgba(0,0,0,.15);
    }
    .h1 { font-size: clamp(22px, 4vw, 32px); margin: 4px 0 8px; }
    .h2 { font-size: clamp(18px, 3vw, 24px); margin: 0 0 6px; }
    .muted { color: var(--muted); }

    details { border: 1px dashed var(--ring); border-radius: 14px; padding: 12px 14px; }
    summary { cursor: pointer; font-weight: 700; }
    .kpi {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin: 8px 0 6px;
    }
    .kpi .k { background: var(--panel); border: 1px solid var(--ring); border-radius: 14px; padding: 12px; }
    .badge { font-size: 12px; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--ring); }

    .footer { opacity: .7; font-size: 12px; padding-top: 10px; }

    /* Print */
    @media print {
      .sidebar, .topbar, .top-actions { display: none !important; }
      body { background: white; color: black; }
      .card { box-shadow: none; border-color: #ccc; }
    }
    /* Badges & helpers */
    .chip {display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--ring);font-size:12px;margin-right:6px}
    .ok{background:rgba(61,214,165,.14);border-color:var(--accent-2)}
    .warn{background:rgba(255,107,107,.14);border-color:var(--danger)}
    .info{background:rgba(122,162,255,.14);border-color:var(--accent)}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .field{display:grid;gap:6px}
    .field input,.field select{padding:10px 12px;border-radius:12px;border:1px solid var(--ring);background:var(--panel);color:var(--text)}
    .result{font-weight:800;font-size:22px;margin-top:6px}
    .hl{padding:6px 10px;border-radius:10px}
    .hl-blue{background:rgba(122,162,255,.14);border:1px solid var(--accent)}
    .hl-green{background:rgba(61,214,165,.14);border:1px solid var(--accent-2)}
    .hl-red{background:rgba(255,107,107,.14);border:1px solid var(--danger)}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">💼 Rémunération & Temps de travail — Fiche interactive</div>
    <div class="top-actions">
      <button class="btn" id="themeToggle" aria-pressed="false" title="Basculer clair/sombre">🌗 Thème</button>
      <button class="btn" onclick="window.print()" title="Imprimer ou exporter en PDF">🖨️ Imprimer</button>
      <button class="btn btn-accent" id="exportJson" title="Exporter le contenu au format JSON">⤴️ Export JSON</button>
    </div>
  </header>
  <div class="layout">
    <aside class="sidebar">
      <label class="search" for="q">
        🔎 <input id="q" type="search" placeholder="Rechercher une notion (ex: congés, SMIC, HS)…" />
      </label>
      <nav class="toc" id="toc">
        <a href="#intro" class="active">Introduction</a>
        <a href="#salaire-base">Salaire de base & SMIC</a>
        <a href="#conges-payes">Congés payés</a>
        <a href="#jours-feries">Jours fériés</a>
        <a href="#exos-feries">Exercices fériés</a>
        <a href="#heures-sup">Heures supplémentaires</a>
        <a href="#exos-hs">Exercices HS</a>
        <a href="#heures-compl">Heures complémentaires</a>
        <a href="#exos-hc">Exercices HC</a>
        <a href="#quiz">Quiz rapide</a>
        <a href="#avantages-nature">Avantages en nature</a>
        <a href="#temps-effectif">Temps de travail effectif</a>
        <a href="#refs">Références officielles</a>
      </nav>
    </aside>

    <main class="content" id="content">
      <section id="intro" class="card" data-tags="intro structure méthode">
        <h1 class="h1">Bienvenue 👋</h1>
        <p class="muted">Ce document HTML/CSS/JS est un <strong>template interactif</strong> pour synthétiser un cours sur la rémunération brute et le temps de travail. Il fonctionne hors-ligne, s’imprime proprement et propose recherche, sommaire et export.</p>
        <div class="kpi">
          <div class="k"><div class="muted">Durée légale (hebdo)</div><div class="h2">35 h</div></div>
          <div class="k"><div class="muted">Mensualisation (35 h)</div><div class="h2">151,67 h</div></div>
          <div class="k"><div class="muted">Semaines de CP</div><div class="h2">5 sem.</div></div>
        </div>
        <details>
          <summary>Comment utiliser</summary>
          <ul>
            <li>🗂️ Naviguez via le sommaire à gauche ;</li>
            <li>🔎 Tapez un mot-clé pour filtrer les sections ;</li>
            <li>🖨️ Imprimez (ou exportez en PDF) avec le bouton en haut ;</li>
            <li>🌗 Changez de thème clair/sombre ;</li>
            <li>⤴️ Exportez le contenu au format JSON pour réutilisation.</li>
          </ul>
        </details>
      </section>

      <section id="salaire-base" class="card" data-tags="smic salaire base mensualisation minimum grilles">
        <h2 class="h1">Salaire de base & SMIC</h2>
        <p>
          Le salaire de base se calcule souvent via l’horaire mensuel moyen :<br/>
          <code>Horaire mensuel = durée hebdo × 52 / 12</code> (pour 35 h → 151,67 h). Le respect du salaire minimum se vérifie au regard du <em>SMIC</em> ou du minimum conventionnel.
        </p>
        <details>
          <summary>À retenir</summary>
          <ul>
            <li>Le salaire peut être fixe, à la tâche, ou avec part variable (commissions, etc.).</li>
            <li>Certains éléments comptent pour vérifier le minimum (ex : avantages en nature selon règles), d’autres non.</li>
          </ul>
        </details>
      </section>

      <section id="conges-payes" class="card" data-tags="congés payés acquisition période référence maintien dixième indemnité déclenchement heures supplémentaires 2025">
        <h2 class="h1">Congés payés (acquisition, indemnité & impact HS) <span class="chip info">⚖️ MAJ 2025</span></h2>
        <p>
          Droits acquis sur une période de référence (souvent 1er juin N‑1 → 31 mai N). Tout salarié bénéficie de <strong>5 semaines</strong> (30 ouvrables ou 25 ouvrés) par an. Certaines périodes d’absence sont assimilées à du travail effectif pour l’acquisition.
        </p>
        <p class="hl hl-blue">🆕 Depuis 2025, <strong>les jours de CP posés dans la semaine sont pris en compte</strong> pour apprécier le seuil de déclenchement des heures supplémentaires lorsque le décompte se fait à la semaine. On additionne <em>heures réellement travaillées</em> + <em>CP au rythme habituel</em> et on compare au seuil de 35 h.</p>
        <details>
          <summary>Indemnité de CP — deux méthodes</summary>
          <ol>
            <li><strong>10ᵉ</strong> : 10 % de la rémunération brute de référence.</li>
            <li><strong>Maintien</strong> : ce que le salarié aurait perçu s’il avait travaillé (retenue pour absence en miroir).</li>
          </ol>
          <p>On retient <em>la plus favorable</em> pour le salarié.</p>
        </details>
      </section>

      <section id="heures-sup" class="card" data-tags="heures supplémentaires majorations 25% 50% contingent repos congés payés jurisprudence 2025">
        <h2 class="h1">Heures supplémentaires <span class="chip info">⚖️ MAJ 2025</span></h2>
        <p>
          Heures au‑delà de la durée légale (35 h/semaine), en principe à la demande de l’employeur. Majorations usuelles : <strong>25 %</strong> de la 36ᵉ à la 43ᵉ heure, puis <strong>50 %</strong> (sauf dispositions conventionnelles plus favorables).
        </p>
        <p class="hl hl-blue">🆕 Depuis un arrêt de la Cour de cassation (10 septembre 2025), <strong>les jours de congés payés posés dans la semaine sont assimilés à du temps de travail</strong> pour apprécier le seuil de déclenchement des heures supplémentaires. Concrètement : on compare la somme <em>heures réellement travaillées + heures de congé (au rythme habituel)</em> au seuil des 35 h.</p>
        <details>
          <summary>Conversions utiles</summary>
          <p><code>centièmes d’heure = minutes / 60</code> · ex : 15 min → 0,25 h · 30 min → 0,50 h</p>
        </details>
      </section>

      <section id="heures-compl" class="card" data-tags="temps partiel heures complémentaires 1/10 1/3 majorations limite semaine">
        <h2 class="h1">Heures complémentaires (temps partiel) <span class="chip info">🧩 Rappel</span></h2>
        <p>
          Heures au‑delà de la durée contractuelle du temps partiel, sans atteindre la durée légale. Plafond par défaut : <strong>+10 %</strong> de l’horaire contractuel (pouvant aller jusqu’à <strong>1/3</strong> via accord). Majorations : <strong>+10 %</strong> dans la limite du 1/10ᵉ, puis <strong>+25 %</strong> au‑delà (et dans la limite de 1/3).</p>
        <p class="hl hl-green">💡 Astuce : pensez <em>contrat d’abord</em> (HC), <em>loi ensuite</em> (HS). Les HC ne transforment pas le contrat en temps plein et ne donnent pas droit au repos comp. obligatoire.</p>
      </section>

      <section id="avantages-nature" class="card" data-tags="avantages en nature logement véhicule repas tic évaluation cotisations">
        <h2 class="h1">Avantages en nature</h2>
        <p>
          Biens ou services fournis pour un usage personnel (logement, véhicule, repas, TIC…). Constituent un <em>élément de rémunération</em> : intégrés au brut, soumis à cotisations et imposables. Évaluation forfaitaire ou au réel selon l’avantage et le cadre.
        </p>
      </section>

      <section id="temps-effectif" class="card" data-tags="temps de travail effectif repos pauses astreinte déplacements jours fériés rtt">
        <h2 class="h1">Temps de travail effectif</h2>
        <p>
          Période où le salarié est à la disposition de l’employeur et se conforme à ses directives sans pouvoir vaquer librement. Sert au calcul des HS et au respect des plafonds (10 h/j, 48 h/sem., 44 h en moyenne sur 12 sem.). Attention : la notion pour l’acquisition des CP peut inclure certaines absences.
        </p>
        <details>
          <summary>Repos & cas particuliers</summary>
          <ul>
            <li>Repos quotidien : 11 h · Repos hebdo : 24 h + 11 h = 35 h.</li>
            <li>Pauses, habillage, astreinte, déplacements : traitement variable selon conditions.</li>
          </ul>
        </details>
      </section>

      <section id="jours-feries" class="card" data-tags="jours fériés 1er mai chômé payé liste mensualisation exceptions service-public">
        <h2 class="h1">Jours fériés 🎆 (comptage & paie)</h2>
        <p><span class="chip info">Règle simple</span> Un jour férié <strong>chômé et payé</strong> n’est pas du temps de <em>travail effectif</em> : il <strong>ne compte pas</strong> pour atteindre le seuil des 35 h de déclenchement des HS. En revanche, un <strong>férié travaillé</strong> compte (heures réellement effectuées).</p>
        <ul>
          <li>🎌 <strong>Liste légale (11)</strong> : 1er janvier, lundi de Pâques, 1er mai, 8 mai, Ascension, lundi de Pentecôte, 14 juillet, Assomption, Toussaint, 11 nov., Noël.</li>
          <li>🌟 <strong>1er mai</strong> : s’il est travaillé → rémunération <strong>doublée</strong> ; s’il est chômé → <strong>payé sans perte</strong>.</li>
          <li>💶 <strong>Mensualisation</strong> : en pratique, un férié chômé est <em>payé</em> (pas de perte de salaire). <span class="chip ok">✅ Cas usuel</span></li>
          <li>🧩 <strong>Rares exceptions (non payé)</strong> : salarié <em>sans</em> 3 mois d’ancienneté, travail à domicile, intermittent… (sauf dispositions plus favorables). <span class="chip warn">⚠️ Cas d’école</span></li>
        </ul>
        <p class="hl hl-green">Astuce mémo : « CP → + heures ; Férié chômé → 0 h ; Férié travaillé → + heures ; 1er mai travaillé → double ». 😉</p>
      </section>

      <section id="exos-feries" class="card" data-tags="exercices jours fériés chômé payé non payé 1er mai rémunération">
        <h2 class="h1">🧪 Exercices — Jours fériés</h2>
        <p class="muted">Entraînez-vous aux impacts paie/temps de travail selon que le férié est chômé payé, chômé non payé (rare) ou travaillé.</p>
        <div class="grid two">
          <div class="field"><label>Mensualisé ?</label>
            <select id="ferie_mensu"><option value="oui">Oui (cas usuel)</option><option value="non">Non</option></select>
          </div>
          <div class="field"><label>Type de férié</label>
            <select id="ferie_type">
              <option value="chome_paye">Chômé payé</option>
              <option value="chome_nonpaye">Chômé non payé (rare)</option>
              <option value="travaille">Travaillé</option>
              <option value="premier_mai_travaille">1er mai travaillé</option>
            </select>
          </div>
          <div class="field"><label>Heures planifiées ce jour (si travaillé)</label><input id="ferie_heures" type="number" min="0" step="0.01" placeholder="ex : 7"/></div>
          <div class="field"><label>Taux horaire (€)</label><input id="ferie_th" type="number" min="0" step="0.01" placeholder="ex : 12.50"/></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcFerie">🚀 Calculer</button>
          <span class="muted">Règles : chômé payé → pas de perte (mensualisé) ; chômé non payé → perte potentielle (cas rares) ; travaillé → salaire normal ; 1er mai travaillé → salaire doublé.</span>
        </div>
        <div id="ferie_out" class="result"></div>
        <div id="ferie_break" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemples guidés</summary>
          <ul>
            <li>Mensualisé, férié chômé : 0 h au compteur HS, pas de perte de salaire.</li>
            <li>Férié travaillé 7 h (hors 1er mai), TH = 12 € → +84 € bruts, heures prises en compte pour le seuil HS.</li>
            <li>1er mai travaillé 7 h, TH = 12 € → +168 € bruts (double rémunération).</li>
          </ul>
        </details>
      </section>

      <section id="exos-hs" class="card" data-tags="exercices heures supplémentaires calcul simulateur congés payés jours fériés">
        <h2 class="h1">🧪 Exercices & simulateur — Heures supplémentaires</h2>
        <div class="grid two">
          <div class="field"><label>Heures <strong>travaillées</strong> dans la semaine (hors fériés)</label><input id="hs_trav" type="number" min="0" step="0.01" placeholder="ex : 28"/></div>
          <div class="field"><label>Jours de <strong>congés payés</strong> posés</label><input id="hs_cp_j" type="number" min="0" max="6" step="1" placeholder="ex : 2"/></div>
          <div class="field"><label>Heures <strong>par jour</strong> habituel (planning)</label><input id="hs_hpd" type="number" min="0" step="0.01" placeholder="ex : 7"/></div>
          <div class="field"><label>Heures <strong>travaillées un jour férié</strong> (si oui)</label><input id="hs_h_ferie" type="number" min="0" step="0.01" placeholder="ex : 5"/></div>
          <div class="field"><label>Seuil hebdo</label><input id="hs_seuil" type="number" min="0" step="0.01" value="35"/></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcHS">🚀 Calculer</button>
          <span class="muted">HS = max(0, (heures travaillées + CP × heures/jour + heures férié travaillées) − seuil). Les fériés <em>chômés</em> n’entrent pas dans le calcul.</span>
        </div>
        <div id="hs_out" class="result"></div>
        <div id="hs_breakdown" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemple guidé</summary>
          <p>35 h hebdo, 3 jours travaillés (21 h) + 1 jour CP (7 h) + férié <em>chômé</em> : total pris en compte = 28 h → <strong>0 HS</strong>. Si le férié est <em>travaillé</em> 7 h → 35 h → <strong>0 HS</strong>. Avec 2 CP (14 h) + 28 h travaillées → 42 h → <strong>7 HS</strong> (25 %).</p>
        </details>
      </section>

      <section id="exos-hc" class="card" data-tags="exercices heures complémentaires simulateur temps partiel">
        <h2 class="h1">🧪 Exercices & simulateur — Heures complémentaires</h2>
        <div class="grid two">
          <div class="field"><label>Horaire <strong>contractuel</strong> (hebdo)</label><input id="hc_contract" type="number" min="1" step="0.01" placeholder="ex : 24"/></div>
          <div class="field"><label>Heures <strong>réalisées</strong> dans la semaine</label><input id="hc_real" type="number" min="0" step="0.01" placeholder="ex : 28"/></div>
          <div class="field"><label>Accord portant la limite à <strong>1/3</strong> ?</label>
            <select id="hc_one_third"><option value="non">Non</option><option value="oui">Oui</option></select>
          </div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-accent" id="calcHC">🚀 Calculer</button>
          <span class="muted">Majoration : +10 % jusqu’à 1/10ᵉ, puis +25 % jusqu’à 1/3 si accord.</span>
        </div>
        <div id="hc_out" class="result"></div>
        <div id="hc_breakdown" class="muted"></div>
        <details style="margin-top:10px"><summary>Exemple guidé</summary>
          <p>Contrat 20 h, accord 1/3, semaine à 26 h → 6 HC : 2 h à +10 % (1/10 = 2 h) puis 4 h à +25 %.</p>
        </details>
      </section>

      <section id="quiz" class="card" data-tags="quiz entrainement heures supplémentaires complémentaires jours fériés congés payés">
        <h2 class="h1">🎯 Quiz — 10 questions</h2>
        <ol id="quizList" style="line-height:1.7">
          <li data-correct="non">35 h : 3 jours travaillés (21 h) + 1 CP (7 h) + 1 jour travaillé (7 h). Y a‑t‑il des HS ?
            <div><button class="btn" data-q="1" data-a="oui">Oui</button> <button class="btn" data-q="1" data-a="non">Non</button> <span class="chip" id="q1"></span></div>
          </li>
          <li data-correct="mix">Contrat 24 h. Réalisé : 27 h. Sans accord 1/3, quelles majorations ?
            <div><button class="btn" data-q="2" data-a="10">Tout à +10 %</button> <button class="btn" data-q="2" data-a="mix">1/10ᵉ à +10 %, reste à +25 %</button> <span class="chip" id="q2"></span></div>
          </li>
          <li data-correct="non">Semaine avec 1 férié <em>chômé payé</em> et 28 h travaillées (35 h hebdo). HS ?
            <div><button class="btn" data-q="3" data-a="oui">Oui</button> <button class="btn" data-q="3" data-a="non">Non</button> <span class="chip" id="q3"></span></div>
          </li>
          <li data-correct="oui">Semaine avec 1 férié <em>travaillé</em> 7 h et 28 h travaillées (35 h hebdo). HS ?
            <div><button class="btn" data-q="4" data-a="oui">Oui</button> <button class="btn" data-q="4" data-a="non">Non</button> <span class="chip" id="q4"></span></div>
          </li>
          <li data-correct="non">Semaine : 21 h travaillées + 2 CP (2×7 h). HS ?
            <div><button class="btn" data-q="5" data-a="oui">Oui</button> <button class="btn" data-q="5" data-a="non">Non</button> <span class="chip" id="q5"></span></div>
          </li>
          <li data-correct="oui">Semaine : 28 h travaillées + 2 CP (2×7 h). HS ?
            <div><button class="btn" data-q="6" data-a="oui">Oui</button> <button class="btn" data-q="6" data-a="non">Non</button> <span class="chip" id="q6"></span></div>
          </li>
          <li data-correct="mix">Contrat 20 h, réalisé 26 h avec accord 1/3 : répartition des HC ?
            <div><button class="btn" data-q="7" data-a="10">6 h à +10 %</button> <button class="btn" data-q="7" data-a="mix">2 h à +10 % puis 4 h à +25 %</button> <span class="chip" id="q7"></span></div>
          </li>
          <li data-correct="oui">Contrat 20 h, réalisé 23 h sans accord 1/3 : dépassement autorisé ?
            <div><button class="btn" data-q="8" data-a="oui">Oui</button> <button class="btn" data-q="8" data-a="non">Non</button> <span class="chip" id="q8"></span></div>
          </li>
          <li data-correct="non">Semaine décomptée à la semaine : 28 h travaillées + 1 CP (7 h). HS ?
            <div><button class="btn" data-q="9" data-a="oui">Oui</button> <button class="btn" data-q="9" data-a="non">Non</button> <span class="chip" id="q9"></span></div>
          </li>
          <li data-correct="oui">Semaine décomptée à la semaine : 30 h travaillées + 1 CP (7 h). HS ?
            <div><button class="btn" data-q="10" data-a="oui">Oui</button> <button class="btn" data-q="10" data-a="non">Non</button> <span class="chip" id="q10"></span></div>
          </li>
        </ol>
      </section>

      <section class="card" id="bloc-notes" data-tags="notes brouillon révision">
        <h2 class="h1">Bloc-notes 📝</h2>
        <p class="muted">Vos points clés, formules et pièges à éviter.</p>
        <textarea id="notes" rows="8" style="width:100%; border-radius:12px; padding:12px; border:1px solid var(--ring); background:var(--panel); color:var(--text);"></textarea>
        <div style="display:flex; gap:8px; margin-top:8px;">
          <button class="btn" id="saveNotes">💾 Sauvegarder</button>
          <span id="saved" class="muted" aria-live="polite"></span>
        </div>
      </section>

      <footer class="footer">
        <span>Gabarit pédagogique HTML/CSS/JS — vous pouvez adapter librement ce fichier à votre cours.</span>
      </footer>
    <section id="refs" class="card" data-tags="références légales code du travail legifrance service-public boss gouv jurisprudence cour de cassation">
        <h2 class="h1">📚 Références officielles (France)</h2>
        <ul>
          <li><strong>Heures supplémentaires</strong> : Code du travail, art. <a href="https://www.legifrance.gouv.fr/codes/article_lc/LEGIARTI000033020373" target="_blank" rel="noopener">L3121‑28</a> et suivants ; fiche Ministère du Travail : <a href="https://travail-emploi.gouv.fr/les-heures-supplementaires-definition-et-limites" target="_blank" rel="noopener">"Définition & limites"</a>.</li>
          <li><strong>Heures complémentaires</strong> (temps partiel) : Code du travail, partie L3123 (ex. <a href="https://www.legifrance.gouv.fr/codes/id/LEGISCTA000033020103" target="_blank" rel="noopener">Sous‑section 1</a>) ; Service‑Public : <a href="https://www.service-public.fr/particuliers/vosdroits/F32428" target="_blank" rel="noopener">Temps partiel</a> ; BOSS : <a href="https://boss.gouv.fr/accueil/exonerations/exonerations-heures-supplementai.html" target="_blank" rel="noopener">Exonérations HS/HC</a>.</li>
          <li><strong>Jours fériés</strong> : Code du travail, chap. <a href="https://www.legifrance.gouv.fr/codes/section_lc/LEGITEXT000006072050/LEGISCTA000006178007/" target="_blank" rel="noopener">L3133‑1 à L3133‑12</a> ; Ministère du Travail : <a href="https://travail-emploi.gouv.fr/les-jours-feries-et-les-ponts" target="_blank" rel="noopener">Jours fériés et ponts</a> ; Service‑Public : <a href="https://www.service-public.fr/particuliers/vosdroits/F2405" target="_blank" rel="noopener">Fiche salariés</a>.</li>
          <li><strong>CP & déclenchement HS (MAJ 10/09/2025)</strong> : Communiqué Cour de cassation : <a href="https://www.courdecassation.fr/toutes-les-actualites/2025/09/10/communique-conge-paye-et-decompte-des-heures-supplementaires" target="_blank" rel="noopener">"Congé payé et décompte des heures supplémentaires"</a>.</li>
        </ul>
        <p class="muted">Sources : Légifrance, Cour de cassation, Ministère du Travail, Service‑Public.fr, BOSS (Bulletin officiel de la Sécurité sociale). Aucun blog non officiel.</p>
      </section>

      </main>
  </div>

  <script>
    // Theme toggle (light/dark)
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeToggle');
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme) document.documentElement.setAttribute('data-theme', storedTheme);
    themeBtn?.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || 'dark';
      const next = current === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeBtn.setAttribute('aria-pressed', String(next === 'light'));
    });

    // TOC active on scroll
    const tocLinks = [...document.querySelectorAll('#toc a')];
    const sections = tocLinks.map(a => document.querySelector(a.getAttribute('href')));
    const onScroll = () => {
      const y = window.scrollY + 90;
      let activeIndex = 0;
      sections.forEach((sec, i) => { if (sec && sec.offsetTop <= y) activeIndex = i; });
      tocLinks.forEach((a, i) => a.classList.toggle('active', i === activeIndex));
    }
    document.addEventListener('scroll', onScroll, { passive: true });
    onScroll();

    // Search filter
    const q = document.getElementById('q');
    q?.addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase().trim();
      document.querySelectorAll('main .card').forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').toLowerCase();
        const text = card.textContent.toLowerCase();
        const hit = !term || tags.includes(term) || text.includes(term);
        card.style.display = hit ? '' : 'none';
      });
    });

    // Notes localStorage
    const notes = document.getElementById('notes');
    const savedLbl = document.getElementById('saved');
    const key = 'fiche-notes';
    notes.value = localStorage.getItem(key) || '';
    document.getElementById('saveNotes')?.addEventListener('click', () => {
      localStorage.setItem(key, notes.value);
      savedLbl.textContent = 'Noté ✔️';
      setTimeout(() => savedLbl.textContent = '', 1200);
    });

    // Simple JSON export (content-only)
    document.getElementById('exportJson')?.addEventListener('click', () => {
      const data = [...document.querySelectorAll('main .card')].map(sec => ({
        id: sec.id,
        title: sec.querySelector('.h1')?.textContent?.trim(),
        text: sec.innerText.trim()
      }));
      const blob = new Blob([JSON.stringify({ exportedAt: new Date().toISOString(), data }, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'fiche-remuneration-temps-travail.json';
      a.click(); URL.revokeObjectURL(url);
    });

    // === Simulateur HS (avec CP assimilé) ===
    const hsTrav = document.getElementById('hs_trav');
    const hsCPJ = document.getElementById('hs_cp_j');
    const hsHPD = document.getElementById('hs_hpd');
    const hsHFerie = document.getElementById('hs_h_ferie');
    const hsSeuil = document.getElementById('hs_seuil');
    const hsOut = document.getElementById('hs_out');
    const hsBreak = document.getElementById('hs_breakdown');
    document.getElementById('calcHS')?.addEventListener('click', () => {
      const t = parseFloat(hsTrav.value||'0');
      const j = parseFloat(hsCPJ.value||'0');
      const hpd = parseFloat(hsHPD.value||'0');
      const seuil = parseFloat(hsSeuil.value||'35');
      const ferieTravaillees = parseFloat(hsHFerie.value||'0');
      const assimil = t + j*hpd + ferieTravaillees; // fériés chômés = 0 h, travaillés = +heures
      const hs = Math.max(0, assimil - seuil);
      const hs25 = Math.min(hs, 8);
      const hs50 = Math.max(0, hs - 8);
      hsOut.textContent = `🔎 Total pris en compte = ${assimil.toFixed(2)} h → HS = ${hs.toFixed(2)} h (25%: ${hs25.toFixed(2)} h, 50%: ${hs50.toFixed(2)} h)`;
      hsBreak.innerHTML = assimil>=seuil ? `<span class='chip ok'>✅ Seuil dépassé</span> Pensez aux contreparties (repos/contingent).` : `<span class='chip warn'>ℹ️ Pas de HS</span> Total < seuil.`;
    });

    // === Simulateur HC (temps partiel) ===
    const hcC = document.getElementById('hc_contract');
    const hcR = document.getElementById('hc_real');
    const hcOneThird = document.getElementById('hc_one_third');
    const hcOut = document.getElementById('hc_out');
    const hcBreak = document.getElementById('hc_breakdown');
    document.getElementById('calcHC')?.addEventListener('click', () => {
      const c = parseFloat(hcC.value||'0');
      const r = parseFloat(hcR.value||'0');
      const max10 = c*0.1;
      const max33 = c*(1/3);
      const accord = hcOneThird.value==='oui';
      const extra = Math.max(0, r - c);
      if (extra===0) { hcOut.textContent = '0 h HC'; hcBreak.textContent=''; return; }
      const cap = accord ? max33 : max10;
      if (extra>cap+1e-9) {
        hcOut.textContent = `❗ Dans ce cadre, ${extra.toFixed(2)} h dépassent le plafond autorisé (${cap.toFixed(2)} h).`;
        hcBreak.textContent = 'Ajuster la planification ou appliquer un autre dispositif.';
        return;
      }
      const hc10 = Math.min(extra, max10);
      const hc25 = Math.max(0, extra - max10);
      hcOut.textContent = `HC = ${extra.toFixed(2)} h → +10%: ${hc10.toFixed(2)} h${accord?`, +25%: ${hc25.toFixed(2)} h`: hc25>0?`, ⚠️ au-delà du 1/10ᵉ non autorisé sans accord`:''}`;
      hcBreak.innerHTML = `<span class='chip ok'>${hc10.toFixed(2)} h à +10%</span>` + (hc25>0? ` <span class='chip ok'>${hc25.toFixed(2)} h à +25%</span>`: '');
    });

    // === Exercices fériés (chômé payé / non payé / travaillé) ===
    const ferieMensu = document.getElementById('ferie_mensu');
    const ferieType = document.getElementById('ferie_type');
    const ferieHeures = document.getElementById('ferie_heures');
    const ferieTH = document.getElementById('ferie_th');
    const ferieOut = document.getElementById('ferie_out');
    const ferieBreak = document.getElementById('ferie_break');
    document.getElementById('calcFerie')?.addEventListener('click', () => {
      const mensu = ferieMensu.value==='oui';
      const type = ferieType.value;
      const h = parseFloat(ferieHeures.value||'0');
      const th = parseFloat(ferieTH.value||'0');
      let deltaSalaire = 0; let commentaire = '';
      if (type==='chome_paye') {
        deltaSalaire = 0; commentaire = mensu? 'Mensualisé : pas de perte, journée chômée payée.' : 'Non mensualisé : vérifier dispositions applicables.';
      } else if (type==='chome_nonpaye') {
        deltaSalaire = mensu? 0 : -h*th; commentaire = mensu? 'Mensualisé : en pratique payé.' : 'Cas rare : perte possible si conditions légales non remplies.';
      } else if (type==='travaille') {
        deltaSalaire = h*th; commentaire = 'Férié travaillé (hors 1er mai) : rémunération normale.';
      } else if (type==='premier_mai_travaille') {
        deltaSalaire = 2*h*th; commentaire = '1er mai travaillé : rémunération doublée.';
      }
      ferieOut.textContent = `${deltaSalaire>=0? '💶 Gain/Rémunération': '💸 Perte'} estimé(e) : ${deltaSalaire.toFixed(2)} €`;
      ferieBreak.textContent = commentaire;
    });

    // === Quiz étendu (10 Q) ===
    const answers = {};
    document.querySelectorAll('#quiz ol > li').forEach((li, idx) => {
      answers[String(idx+1)] = li.getAttribute('data-correct');
    });
    document.querySelectorAll('#quiz button[data-q]')?.forEach(btn=>{
      btn.addEventListener('click', () => {
        const q = btn.getAttribute('data-q');
        const a = btn.getAttribute('data-a');
        const ok = a === String(answers[q]);
        const tag = document.getElementById('q'+q);
        if (tag) {
          tag.className = 'chip ' + (ok ? 'ok' : 'warn');
          tag.textContent = ok ? '✅ Correct' : '❌ Essaie encore';
        }
      });
    });
  </script>
</body>
</html>
